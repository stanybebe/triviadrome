{"ast":null,"code":"import _toConsumableArray from \"/Users/mac/Documents/GitHub/triviadrome/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/mac/Documents/GitHub/triviadrome/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/mac/Documents/GitHub/triviadrome/src/pages/User.jsx\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { io } from 'socket.io-client';\nvar socket = io('http://localhost:3001'); // Replace with your server URL\n\nfunction User() {\n  var _this = this;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    message = _useState2[0],\n    setMessages = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    messagesIn = _useState4[0],\n    setMessagesIn = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    errMessage = _useState6[0],\n    setErrmessage = _useState6[1];\n  var usernameRef = useRef(''); // Create a ref for storing the username\n\n  useEffect(function () {\n    var storedUsername = localStorage.getItem('storedUsername');\n    if (storedUsername) {\n      usernameRef.current = storedUsername;\n    }\n    console.log(storedUsername);\n    socket.on('adminMessageIn', function (data) {\n      console.log('Received admin message:', data);\n      console.log(data);\n      if (usernameRef.current === data.username) {\n        setMessagesIn(function (prevMessages) {\n          return [].concat(_toConsumableArray(prevMessages), [data]);\n        });\n      }\n    });\n    socket.on('joinError', function (data) {\n      setErrmessage(data);\n    });\n    return function () {\n      socket.off('adminMessageIn');\n      socket.off('joinError');\n    };\n  }, []); // Empty dependency array to run effect only once\n\n  var handleMessageChange = function handleMessageChange(event) {\n    setMessages(event.target.value);\n  };\n  var handleSendMessage = function handleSendMessage(e) {\n    e.preventDefault();\n    var username = usernameRef.current; // Access the stored username\n    socket.emit('getJoinedUsers', username);\n    socket.emit('userMessage', {\n      username: username,\n      message: message\n    });\n    setMessages('');\n  };\n  var handleUsernameChange = function handleUsernameChange(event) {\n    var newUsername = event.target.value;\n    setUsername(newUsername);\n  };\n  var setUsername = function setUsername(value) {\n    usernameRef.current = value;\n    localStorage.setItem('storedUsername', value);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-col items-center justify-center min-h-screen bg-gray-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-2xl mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, \"Welcome, \", localStorage.getItem('storedUsername'), \"!\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSendMessage,\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"username\",\n    className: \"text-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, \"Username:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    onChange: handleUsernameChange,\n    className: \"w-full p-2 border rounded\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"message\",\n    className: \"text-lg mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, \"Message:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"message\",\n    value: message,\n    onChange: handleMessageChange,\n    className: \"w-full p-2 border rounded\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"w-full px-4 py-2 mt-4 bg-blue-500 text-white rounded hover:bg-blue-600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, \"Send\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-red-500 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, errMessage), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-2xl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, \"Admin messages\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, messagesIn.map(function (mes, index) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: index,\n      className: \"mb-2\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      className: \"text-blue-500\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 15\n      }\n    }, \"admin: \"), mes.messagesOut);\n  }))));\n}\nexport default User;","map":{"version":3,"names":["React","useState","useEffect","useRef","io","socket","User","_this","_useState","_useState2","_slicedToArray","message","setMessages","_useState3","_useState4","messagesIn","setMessagesIn","_useState5","_useState6","errMessage","setErrmessage","usernameRef","storedUsername","localStorage","getItem","current","console","log","on","data","username","prevMessages","concat","_toConsumableArray","off","handleMessageChange","event","target","value","handleSendMessage","e","preventDefault","emit","handleUsernameChange","newUsername","setUsername","setItem","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","type","id","onChange","map","mes","index","key","messagesOut"],"sources":["/Users/mac/Documents/GitHub/triviadrome/src/pages/User.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { io } from 'socket.io-client';\n\nconst socket = io('http://localhost:3001'); // Replace with your server URL\n\nfunction User() {\n  const [message, setMessages] = useState([]);\n  const [messagesIn, setMessagesIn] = useState([]);\n  const [errMessage, setErrmessage] = useState('');\n  const usernameRef = useRef(''); // Create a ref for storing the username\n\n  useEffect(() => {\n    const storedUsername = localStorage.getItem('storedUsername');\n    if (storedUsername) {\n      usernameRef.current = storedUsername;\n    }\n    console.log(storedUsername);\n\n    socket.on('adminMessageIn', (data) => {\n      console.log('Received admin message:', data);\n      \n      \n      console.log(data);\n      \n      if (usernameRef.current === data.username) {\n        setMessagesIn((prevMessages) => [...prevMessages,data]);\n      }\n    });\n     \n    socket.on('joinError', (data) => {\n      setErrmessage(data);\n    });\n\n    return () => {\n      socket.off('adminMessageIn');\n      socket.off('joinError');\n    };\n  }, []); // Empty dependency array to run effect only once\n\n  const handleMessageChange = (event) => {\n    setMessages(event.target.value);\n  };\n\n  const handleSendMessage = (e) => {\n    e.preventDefault();\n    const username = usernameRef.current; // Access the stored username\n    socket.emit('getJoinedUsers', username);\n    socket.emit('userMessage', { username, message });\n    setMessages('');\n  };\n\n  const handleUsernameChange = (event) => {\n  const newUsername = event.target.value;\n  setUsername(newUsername);\n  };\n\n  const setUsername = (value) => {\n    usernameRef.current = value;\n    localStorage.setItem('storedUsername', value);\n  };\n  \n\n  return (\n    <div className=\"flex flex-col items-center justify-center min-h-screen bg-gray-100\">\n      <h2 className=\"text-2xl mb-4\">Welcome, {localStorage.getItem('storedUsername')}!</h2>\n      <form onSubmit={handleSendMessage} className=\"mb-4\">\n        <label htmlFor=\"username\" className=\"text-lg\">\n          Username:\n        </label>\n        <input\n          type=\"text\"\n          id=\"username\"\n          onChange={handleUsernameChange}\n          className=\"w-full p-2 border rounded\"\n        />\n\n        <label htmlFor=\"message\" className=\"text-lg mt-4\">\n          Message:\n        </label>\n        <input\n          type=\"text\"\n          id=\"message\"\n          value={message}\n          onChange={handleMessageChange}\n          className=\"w-full p-2 border rounded\"\n        />\n\n        <button\n          type=\"submit\"\n          className=\"w-full px-4 py-2 mt-4 bg-blue-500 text-white rounded hover:bg-blue-600\"\n        >\n          Send\n        </button>\n      </form>\n\n      <div className=\"text-red-500 mb-4\">{errMessage}</div>\n\n      <div>\n        <h1 className=\"text-2xl\">Admin messages</h1>\n        <ul className=\"mt-4\">\n          {messagesIn.map((mes, index) => (\n            <li key={index} className=\"mb-2\">\n              <strong className=\"text-blue-500\">admin: </strong>\n              {mes.messagesOut}\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n}\n\nexport default User;"],"mappings":"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"},"metadata":{},"sourceType":"module"}