{"ast":null,"code":"import _toConsumableArray from\"/Users/mac/Documents/GitHub/triviadrome/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/mac/Documents/GitHub/triviadrome/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{io}from'socket.io-client';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var socket=io('https://master--brilliant-arithmetic-e7a72c.netlify.app:3001');// Replace with your server URL\nfunction User(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),errMessage=_useState8[0],setErrMessage=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),submitted=_useState10[0],setSubmitted=_useState10[1];// New state variable\nvar _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),allMessages=_useState12[0],setAllMessages=_useState12[1];useEffect(function(){var storedUsername=localStorage.getItem('storedUsername');if(storedUsername){setUsername(storedUsername);}console.log(storedUsername);socket.on('adminMessageIn',function(data){console.log('Received admin message:',data);if(localStorage.getItem('storedUsername')===data.username){var newMessageAdmin={sender:'Admin',content:data.messagesOut};setAllMessages(function(prevMessages){return[].concat(_toConsumableArray(prevMessages),[newMessageAdmin]);});}});socket.on('joinError',function(data){setErrMessage(data);});return function(){socket.off('adminMessageIn');socket.off('joinError');};},[]);// Empty dependency array to run effect only once\nvar handleUsernameChange=function handleUsernameChange(event){setUsername(event.target.value);};var handleEmailChange=function handleEmailChange(event){setEmail(event.target.value);};var handleMessageChange=function handleMessageChange(event){setMessage(event.target.value);};var handleJoinSubmit=function handleJoinSubmit(e){e.preventDefault();setSubmitted(true);localStorage.setItem('storedUsername',username);socket.emit('getJoinedUsers',username);};var handleMessageSubmit=function handleMessageSubmit(e){e.preventDefault();var newMessage={sender:username,content:message};setAllMessages(function(prevAllMessages){return[].concat(_toConsumableArray(prevAllMessages),[newMessage]);});socket.emit('userMessage',{username:username,message:message});setMessage('');};var renderJoinForm=function renderJoinForm(){return/*#__PURE__*/_jsxs(\"form\",{className:\"mb-4\",onSubmit:handleJoinSubmit,children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-lg\",htmlFor:\"username\",children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full p-2 border rounded\",type:\"text\",id:\"username\",value:username,onChange:handleUsernameChange,required:true}),/*#__PURE__*/_jsx(\"label\",{className:\"text-lg\",htmlFor:\"email\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full p-2 border rounded\",type:\"email\",id:\"email\",value:email,onChange:handleEmailChange,required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"w-full px-4 py-2 mt-4 bg-blue-500 text-white rounded hover:bg-blue-600\",type:\"submit\",children:\"Join\"})]});};var renderChat=function renderChat(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl mb-4\",children:[\"Welcome, \",localStorage.getItem('storedUsername'),\"!\"]}),/*#__PURE__*/_jsxs(\"form\",{className:\"mb-4\",onSubmit:handleMessageSubmit,children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-lg\",htmlFor:\"message\",children:\"Message:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full p-2 border rounded\",type:\"text\",value:message,onChange:handleMessageChange,required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"w-full px-4 py-2 mt-4 bg-blue-500 text-white rounded hover:bg-blue-600\",type:\"submit\",children:\"Send\"})]}),/*#__PURE__*/_jsx(\"div\",{children:errMessage}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl\",children:\"Messages\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-80 bg-white overflow-y-auto\",children:allMessages.map(function(msg,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"message p-2\",children:[/*#__PURE__*/_jsxs(\"strong\",{className:\"sender\",children:[msg.sender,\": \"]}),/*#__PURE__*/_jsx(\"span\",{className:\"content\",children:msg.content})]},index);})})]});};return/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-5\",children:submitted?renderChat():renderJoinForm()});}export default User;","map":{"version":3,"names":["React","useState","useEffect","io","jsx","_jsx","jsxs","_jsxs","socket","User","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","email","setEmail","_useState5","_useState6","message","setMessage","_useState7","_useState8","errMessage","setErrMessage","_useState9","_useState10","submitted","setSubmitted","_useState11","_useState12","allMessages","setAllMessages","storedUsername","localStorage","getItem","console","log","on","data","newMessageAdmin","sender","content","messagesOut","prevMessages","concat","_toConsumableArray","off","handleUsernameChange","event","target","value","handleEmailChange","handleMessageChange","handleJoinSubmit","e","preventDefault","setItem","emit","handleMessageSubmit","newMessage","prevAllMessages","renderJoinForm","className","onSubmit","children","htmlFor","type","id","onChange","required","renderChat","map","msg","index"],"sources":["/Users/mac/Documents/GitHub/triviadrome/src/pages/User.jsx"],"sourcesContent":["import React, { useState, useEffect} from 'react';\nimport { io } from 'socket.io-client';\n\nconst socket = io('https://master--brilliant-arithmetic-e7a72c.netlify.app:3001'); // Replace with your server URL\n\nfunction User() {\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [message, setMessage] = useState('');\n  const [errMessage, setErrMessage] = useState('');\n  const [submitted, setSubmitted] = useState(false); // New state variable\n  const [allMessages, setAllMessages] = useState([]);\n  useEffect(() => {\n    const storedUsername = localStorage.getItem('storedUsername');\n    if (storedUsername) {\n      setUsername(storedUsername);\n    }\n    console.log(storedUsername);\n\n    socket.on('adminMessageIn', (data) => {\n      console.log('Received admin message:', data);\n      if (localStorage.getItem('storedUsername') === data.username) {\n        const newMessageAdmin = {\n          sender: 'Admin',\n          content: data.messagesOut\n        };\n        setAllMessages((prevMessages) => [...prevMessages, newMessageAdmin]);\n      }\n    });\n\n    socket.on('joinError', (data) => {\n      setErrMessage(data);\n    });\n\n    return () => {\n      socket.off('adminMessageIn');\n      socket.off('joinError');\n    };\n  }, []); // Empty dependency array to run effect only once\n\n  const handleUsernameChange = (event) => {\n    \n    setUsername(event.target.value);\n  };\n\n  const handleEmailChange = (event) => {\n    setEmail(event.target.value);\n  };\n\n  const handleMessageChange = (event) => {\n    setMessage(event.target.value);\n  };\n\n  const handleJoinSubmit = (e) => {\n    e.preventDefault();\n    setSubmitted(true);\n    localStorage.setItem('storedUsername', username);\n    socket.emit('getJoinedUsers', username);\n  };\n\n  const handleMessageSubmit = (e) => {\n    e.preventDefault();\n    const newMessage = {\n      sender: username,\n      content: message\n    };\n    setAllMessages((prevAllMessages) => [...prevAllMessages, newMessage]);\n    socket.emit('userMessage', { username, message });\n    setMessage('');\n   \n  };\n\n \n\n  const renderJoinForm = () => (\n    <form className=\"mb-4\" onSubmit={handleJoinSubmit}>\n      <label className=\"text-lg\" htmlFor=\"username\">Username:</label>\n      <input className=\"w-full p-2 border rounded\" type=\"text\" id=\"username\"  value={username} onChange={handleUsernameChange}  required />\n\n      <label className=\"text-lg\" htmlFor=\"email\">Email:</label>\n      <input className=\"w-full p-2 border rounded\" type=\"email\" id=\"email\" value={email} onChange={handleEmailChange} required />\n\n      <button  className=\"w-full px-4 py-2 mt-4 bg-blue-500 text-white rounded hover:bg-blue-600\" type=\"submit\" >Join</button>\n    </form>\n  );\n\n  const renderChat = () => (\n \n    <div>\n      <h2 className=\"text-2xl mb-4\" >Welcome, {localStorage.getItem('storedUsername')}!</h2>\n      <form className=\"mb-4\" onSubmit={handleMessageSubmit}>\n        <label className=\"text-lg\" htmlFor=\"message\">Message:</label>\n        <input  className=\"w-full p-2 border rounded\" type=\"text\"  value={message} onChange={handleMessageChange} required />\n\n        <button  className=\"w-full px-4 py-2 mt-4 bg-blue-500 text-white rounded hover:bg-blue-600\"\n         type=\"submit\">Send</button>\n      </form>\n\n      <div>\n        {errMessage}\n      </div>\n\n    \n      <h1 className=\"text-2xl\">Messages</h1>\n      <div  className=\"h-80 bg-white overflow-y-auto\">\n        {allMessages.map((msg, index) => (\n          <div key={index} className=\"message p-2\">\n            <strong className=\"sender\">{msg.sender}: </strong>\n            <span className=\"content\">{msg.content}</span>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-5\" >\n      {submitted ? renderChat() : renderJoinForm()}\n    </div>\n  );\n}\n\n\nexport default User;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}